/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */

plugins {
  id 'java'
  id 'application'
  id "com.google.cloud.tools.jib" version "1.0.0"
}

allprojects {
  sourceCompatibility = 1.8
  targetCompatibility = 1.8
}

def mainClass = 'com.example.Runner'

application {
  mainClassName = mainClass
}

jar {
  manifest {
    attributes(
      'Main-Class': mainClass
    )
  }
}

dependencies {
  implementation project('lib')
  testImplementation 'org.junit.jupiter:junit-jupiter-api:5.4.0'
  testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.4.0'
}

repositories {
  jcenter()
}

jib {
  from {
    image = 'openjdk:8-alpine'
  }
  to.image = 'myimage' // the `jib` task will attempt to do a docker push so we cannot use just any name, but the name corresponding to a
  container {
    mainClass = mainClass
  }
}

